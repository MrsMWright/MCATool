/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					/
--------------------------------------------------------------------------------------
*/

-- make WorkflowStartStep nullable as the questions are created later on in the script.
ALTER TABLE WorkflowVersion
	ALTER COLUMN InitialWorkflowQuestionId UNIQUEIDENTIFIER NULL;
	
MERGE INTO Role AS RoleTarget
USING (VALUES
	(1, 'Advisor'),
	(2, 'Decision Maker')
)
AS RoleSource (RoleId, [Description]) ON RoleSource.RoleId = RoleTarget.RoleId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = RoleSource.[Description]
WHEN NOT MATCHED BY TARGET THEN
	INSERT (RoleId, [Description])
	VALUES (RoleId, [Description])
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

MERGE INTO Gender AS GenderTarget
USING (VALUES
	(1, 'Female'),
	(2, 'Male')
)
AS GenderSource (GenderId, [Description]) ON GenderSource.GenderId = GenderTarget.GenderId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = GenderSource.[Description]
WHEN NOT MATCHED BY TARGET THEN
	INSERT (GenderId, [Description])
	VALUES (GenderId, [Description])
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

MERGE INTO [Status] AS StatusTarget
USING (VALUES
	(1, 'In progress'),
	(2, 'Complete'),
	(3, 'Break'),
	(4, 'ReadyToComplete')
)
AS StatusSource (StatusId, [Description]) ON StatusSource.StatusId = StatusTarget.StatusId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = StatusSource.[Description]
WHEN NOT MATCHED BY TARGET THEN
	INSERT (StatusId, [Description])
	VALUES (StatusId, [Description])
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;


MERGE INTO WorkflowVersion AS WorkflowVersionTarget
USING (VALUES
	('69C13E49-E05A-4185-B9B2-CCED15D99694', 'Initial version', NULL, NULL)
)
AS WorkflowVersionSource (WorkflowVersionId, [Description], InitialWorkflowQuestionId, ExpiredDate) ON WorkflowVersionSource.WorkflowVersionId = WorkflowVersionTarget.WorkflowVersionId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = WorkflowVersionSource.[Description],
		InitialWorkflowQuestionId = WorkflowVersionSource.InitialWorkflowQuestionId,
		ExpiredDate = WorkflowVersionSource.ExpiredDate
WHEN NOT MATCHED BY TARGET THEN
	INSERT (WorkflowVersionId, [Description], InitialWorkflowQuestionId, ExpiredDate)
	VALUES (WorkflowVersionId, [Description], InitialWorkflowQuestionId, ExpiredDate)
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;


MERGE INTO WorkflowStage AS WorkflowStageTarget
USING (VALUES
	('3E8C6C52-3A83-45F1-9A67-0784A4E5A312', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'Section 1 – Defining the decision to be made.', 'section1',0),
	('A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'Section 2 – Impairment or disturbance of mind or brain.', 'section2',0),
	('F04431E6-1F6A-4494-83A4-AA503FA1DC39', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'Section 3 – Personal and environmental considerations to enhance capacity.', 'section3',0),
	('E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'Section 4 – Providing information about the decision to be made and checking understanding.', 'section4',1),
	('5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'Section 5 – Assessor’s judgement of person’s capacity to make the decision.', 'section5',1)
)
AS WorkflowStageSource (WorkflowStageId, WorkflowVersionId, [Description], ShortDescription,DisplayStage1DecisionMade) ON WorkflowStageSource.WorkflowStageId = WorkflowStageTarget.WorkflowStageId
WHEN MATCHED THEN
	UPDATE SET 
		WorkflowVersionId = WorkflowStageSource.WorkflowVersionId,
		[Description] = WorkflowStageSource.[Description],
		ShortDescription = WorkflowStageSource.ShortDescription
WHEN NOT MATCHED BY TARGET THEN
	INSERT (WorkflowStageId, WorkflowVersionId, [Description], ShortDescription)
	VALUES (WorkflowStageId, WorkflowVersionId, [Description], ShortDescription)
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;


MERGE INTO Question AS QuestionTarget
USING (VALUES
	-- stage 2
	('29657DD5-184B-4D19-9875-41526BB02569', 'Is there an impairment of, or disturbance in, the functioning of the person’s mind or brain that is preventing them from making the decision at this time?', '<p>A lack of capacity cannot be established merely by reference to a person’s age, appearance, or any condition or aspect of a person’s behaviour which might lead others to make unjustified assumptions about capacity.</p><p>Capacity is not dependent on level of intellectual ability, and doing an IQ test will not by itself, help decide capacity. </p>'),
	('9099237E-69EB-4243-A7E5-B04C3F71DFC4', 'Describe the impairment or disturbance.', NULL),
	('42CBC39E-4EAE-4678-84B3-2766FFDB6A39', 'Is the impairment likely to be temporary or permanent?', '<p>A temporary impairment may, for instance, be due to the person’s mental state e.g.  due to an infection, alcohol use or illness. A permanent impairment may, for instance, be due to the person having a learning disability.</p>'),
	('68299D21-7AD2-4FE1-B515-1592F9B368D1', 'Can the decision wait until the impairment or disturbance has resolved?', NULL),
	('C2880B60-1955-4238-9D99-B908F79C3612', 'The person can make their own decision.', '<p>Remember, a person with capacity can make an unwise decision.</p>'),
	('C7A72552-4C1B-4D58-AB7F-738B15381C70', 'Delay the decision until the impairment or disturbance has resolved.', NULL),

	-- stage 3
	('25E6848A-8A2A-44B0-A888-8505467FD824', 'Is the environment where you are carrying out the assessment free from noise and other distractions?', '<p>Consider factors that may affect the person’s capacity at the moment. These may include major events (e.g. death or changing accommodation etc.), more subtle events (e.g. being upset by a friend, noise etc.), and health issues.</p>'),
	('E17B2276-670C-43DF-91E9-23B98213D384', 'Find a more suitable place to conduct the assessment.', NULL),
	('34C346F7-071F-49B1-9A6A-B556013A5808', 'Has the person had any life events that may affect them at this time?', NULL),
	('292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 'Please describe.', NULL),
	('FF4FA190-7115-41E1-AA47-454C23074EF5', 'Does the assessment require delaying whilst these factors are corrected or mitigated for?', NULL),
	('103E63D9-A781-4F7D-84A0-F253D1172374', 'Please explain.', NULL),
	('F2DF7921-CCE9-4119-9FB3-452EE0C34895', 'Is this a good time of day for the person to do the assessment?', NULL),	
	('940507CC-4CED-4BBD-85BA-36AE1EEE28AA', 'Has the person recently taken medication that may positively or negatively affect their concentration or understanding during the assessment?', NULL),
	('31685F55-4887-4FE1-8491-80A71DD5200A', 'Would the person benefit from assistance from others (family, trusted support worker, advocate) during this assessment?', NULL),
	('EB3794C4-90EE-4738-9731-FF37FE3B4E4B', 'Describe how the person communicates e.g. speech, Makaton, what is their first language, assistive technology?', NULL),
	('8810EEFE-8791-490C-B42B-585AF21175B6', 'Does the person require someone to sign or interpret for them?', NULL),
	('57C93C61-9F29-485B-A4EB-EA854E43CD2E', 'Are they present?', NULL),
	('09970634-6EFD-48BF-8918-C0D56BBB4CA7', 'Does the person use hearing aids?', NULL),
	('3FE71EDD-37EB-4F8D-853D-FE10B95D7850', 'Are they available for this assessment, in working order and are fitted?', NULL),
	('A349DD8F-1769-47BD-AECB-FAD95673B8DA', 'Does the person use glasses or contact lenses to read or see information, pictures, symbols or photographs?', NULL),
	('067FFB11-0C6A-458B-84B3-AC6EA311CA7E', 'Are they available, clean, and being worn if required?', NULL),

	-- stage 4
	('0AB42F6C-0CE4-400A-8D5A-6458BE1942A1', '<u>Provide information to the person</u>, about the decision to be made.', '<p>Remember to use words that people can understand and try and avoid using jargon. </p><p>Consider using other communication aids such as easy- read information, pictures, and sign language to support the information you are giving.</p><p>Also, consider any cultural issues that may be relevant.</p><p>Remember that the amount and type of information should be related to the complexity of the decision to be made. Balance the requirement for enough information to explain the main aspects of the decision to be made, without unnecessarily providing too much information which may overwhelm the person. </p><p>It may however, also be necessary to provide additional information if felt needed, or if requested by the person. </p>'),
	('436A89AA-2924-4ABD-91CB-4F39BE6719D2', '<u>Explain to the person</u> the reason the decision is needed.', NULL),
	('EF8BF4A8-3264-459F-B138-CD7A40F97572', '<u>Explain to the person</u> about the possible benefits of the proposed treatment or care.', NULL),
	('711EACFB-D81F-4196-97D7-53930F9D931E', '<u>Explain to the person</u> about the possible disadvantages or risks of the treatment or care', NULL),
	('507B39EB-7A0E-442D-8EAE-A5DA28F6BF9B', '<u>Explain to the person</u> any possible alternatives for the treatment or care.', NULL),
	('6E24A073-C055-4D9C-A8E5-B2EC457BEB05', '<u>Ask the person</u> if they have any questions or want anything explained again.', NULL),
	('D86368FB-AE0E-47BB-8F03-1821507E90D0', '<u>Ask the person</u> to tell you about the proposed treatment or care.', '<p>Checking that the person has understood the information that they have been provided to help make the decision.</p>'),
	('D947E2F1-753D-4F18-AF80-2992D7298EF0', '<u>Ask the person</u> to tell you what would happen if they had the proposed treatment or care.', NULL),
	('DF9CEB2D-D67E-4ADB-9C03-AB4408E61629', '<u>Ask the person</u> to tell you about any alternative options to the proposed treatment or care.', NULL),
	('F02CFA23-1864-4F8B-99EE-40EA586C3475', '<u>Ask the person</u> to tell you what the possible benefits / good things are about having the proposed treatment or care.', NULL),
	('2381DDF8-3EC8-4346-9B1F-0096CADF5FD5', '<u>Ask the person</u> to tell you what the possible risks / bad things are about having the proposed treatment or care', NULL),
	('A866C57E-C3AD-4E4E-814F-1D03B22E8A9F', '<u>Ask the person</u> to tell you what their decision is about the proposed treatment or care.', NULL),

	('9F1007FE-C960-4C30-A669-F6C11526258E', 'Record the details of the communication aids used (e.g. words, pictures, sign language, photographs etc).', NULL),
	('16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 'Record what was said.', NULL),
	('AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 'Record what the person says.', NULL),

	-- stage 5
	('7C48B106-4D78-4D2F-815B-603C80A2AA52', 'Has the person been able to understand the information relating to the decision to be made?', '<p>As an assessor, this stage is about your judgement based on the information gathered in the preceding stages.</p>'),
	('0F1F2818-2A70-4EC4-987C-2FF586055FC3', 'Has the person been able to retain the information relating to the decision to be made?', '<p>The person only needs to retain the information long enough to make the decision.</p>'),
	('269C3B86-75DA-4EAA-8772-66001018D8BF', 'Has the person been able to weigh the information to enable them to make an informed decision?', '<p>The person needs to be able to use the information – both the pros and cons to make their decision.</p>'),
	('6F779B4D-EF21-46AA-BE5C-5650B7FC2E49', 'Has the person been able to communicate their decision by any means?', '<p>The person can use a variety of means to communicate their decision (e.g. verbal, written, sign language, pictures etc.).</p>'),
	('7AED394D-FCA7-4032-9DD2-FF26D2625E56', 'On the balance of probabilities, based on the evidence gathered, do you believe that the person has the capacity to make this decision at this time?', '<p>A person has capacity if they are able to:</p><ul><li>Understand the information relevant to the decision and</li><li>Retain that information and</li><li>Use or weigh that information as part of the process of making the decision and</li><li>Communicate the decision (whether by talking, using sign language, or any other means).</li></ul>'),
	('52ED9E3D-FDCA-466A-8FCA-365F394591C4', 'The person has the capacity to make this decision.', NULL),
	('9497907A-A256-4D2F-BE54-F59CDB96F259', 'Please explain your reasoning.', NULL),
	('3939FF17-9C2D-4D1F-9E65-5A25C7468068', 'Record their decision.', NULL)
)
AS QuestionSource (QuestionId, [Description], Guidance) ON QuestionSource.QuestionId = QuestionTarget.QuestionId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = QuestionSource.[Description],
		Guidance = QuestionSource.Guidance
WHEN NOT MATCHED BY TARGET THEN
	INSERT (QuestionId, [Description], Guidance)
	VALUES (QuestionId, [Description], Guidance)
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

MERGE INTO [Option] AS OptionTarget
USING (VALUES
	('92AD1021-175E-4704-9FE6-37B4DDF9ADCA', 'Yes'),
	('777E35DE-6793-45A3-9EFB-FD884080F6FA', 'No'),
	('49E44F2D-A135-4C08-87CC-57CE732A3961', 'Permanent'),
	('B4400CD9-8E1A-47E8-BB2C-2469C3A91257', 'Temporary'),
	('98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'Single option')
)
AS OptionSource (OptionId, [Description]) ON OptionSource.OptionId = OptionTarget.OptionId
WHEN MATCHED THEN
	UPDATE SET 
		[Description] = OptionSource.[Description]
WHEN NOT MATCHED BY TARGET THEN
	INSERT (OptionId, [Description])
	VALUES (OptionId, [Description])
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;


MERGE INTO QuestionOption AS QuestionOptionTarget
USING (VALUES
	('7D169961-19F2-4572-962A-0981C6312205', '29657DD5-184B-4D19-9875-41526BB02569', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '9099237E-69EB-4243-A7E5-B04C3F71DFC4', 5),
	('4EC4037F-587B-422B-983A-BD6230C696BC', '29657DD5-184B-4D19-9875-41526BB02569', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),
	('FBD1FDE2-B3B2-448D-9D44-F83D9ED46020', '42CBC39E-4EAE-4678-84B3-2766FFDB6A39', '49E44F2D-A135-4C08-87CC-57CE732A3961', NULL, 5),
	('B0762A43-D6CF-4594-A949-F70D40D2DFD7', '42CBC39E-4EAE-4678-84B3-2766FFDB6A39', 'B4400CD9-8E1A-47E8-BB2C-2469C3A91257', NULL, 10),
	('BFA56866-BC16-4D07-B6DC-5B13385A7EB3', '68299D21-7AD2-4FE1-B515-1592F9B368D1', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('6A156897-B671-4C6B-945E-B329E03D2CA4', '68299D21-7AD2-4FE1-B515-1592F9B368D1', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('84E3D60D-4846-4DB2-8A37-D37FC4629F1C', '25E6848A-8A2A-44B0-A888-8505467FD824', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),
	('96991A39-5406-4961-810A-825DA5734198', '25E6848A-8A2A-44B0-A888-8505467FD824', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),

	('76051066-44D8-48CD-B835-3F8D388F1F17', '34C346F7-071F-49B1-9A6A-B556013A5808', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 5),
	('A42245EC-6F9E-4448-A8AA-C15DC27E1E3E', '34C346F7-071F-49B1-9A6A-B556013A5808', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('7BDE5229-631A-4EFF-A73E-948A088E1E8F', 'FF4FA190-7115-41E1-AA47-454C23074EF5', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '103E63D9-A781-4F7D-84A0-F253D1172374', 5),
	('D89638FB-1CD5-498D-9179-91C349C6A753', 'FF4FA190-7115-41E1-AA47-454C23074EF5', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '103E63D9-A781-4F7D-84A0-F253D1172374', 10),

	('69D09F2B-80F1-4960-A9E7-952402FBCB02', 'F2DF7921-CCE9-4119-9FB3-452EE0C34895', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('88DDAEC7-9A78-479B-A5A3-DD15378EDC47', 'F2DF7921-CCE9-4119-9FB3-452EE0C34895', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 10),

	('8A1AA021-8842-4783-A09C-A93B6C595141', '940507CC-4CED-4BBD-85BA-36AE1EEE28AA', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 5),
	('1BE2AEC8-1706-448E-A988-7779F9B70D1F', '940507CC-4CED-4BBD-85BA-36AE1EEE28AA', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('5CB217BD-78DD-41D5-9B40-A708A69F5F21', '31685F55-4887-4FE1-8491-80A71DD5200A', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 5),
	('D5395000-2351-4694-BD7D-71DD7CA91E69', '31685F55-4887-4FE1-8491-80A71DD5200A', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('65A4E159-E782-4BD8-BE01-30FFDF516C81', '8810EEFE-8791-490C-B42B-585AF21175B6', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 5),
	('326B34E9-692E-4363-84C1-3B8871B1F042', '8810EEFE-8791-490C-B42B-585AF21175B6', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('05A04BAD-7B59-43F5-86DF-3F3A00E9B14C', '57C93C61-9F29-485B-A4EB-EA854E43CD2E', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('F2335E13-3D15-436F-8C86-BE8DB6EFC4DA', '57C93C61-9F29-485B-A4EB-EA854E43CD2E', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('804F31BD-DFEA-48A1-A550-A7E7542B0C78', '3FE71EDD-37EB-4F8D-853D-FE10B95D7850', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('2FDC336D-0A77-4E10-834F-0F2F923CA79C', '3FE71EDD-37EB-4F8D-853D-FE10B95D7850', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '103E63D9-A781-4F7D-84A0-F253D1172374', 10),

	('B86D2A99-C34D-4420-B7F4-9E7873D6C305', 'A349DD8F-1769-47BD-AECB-FAD95673B8DA', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('F7CA0816-B4D5-418D-BF6E-710CA5B829BF', 'A349DD8F-1769-47BD-AECB-FAD95673B8DA', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('01731380-FC2F-45D6-96ED-3EC6A83326BF', '067FFB11-0C6A-458B-84B3-AC6EA311CA7E', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('CE82417C-6CD9-47D5-8E9E-FE86372D8AF7', '067FFB11-0C6A-458B-84B3-AC6EA311CA7E', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '103E63D9-A781-4F7D-84A0-F253D1172374', 10),

	('5EB4577C-20D2-4BD2-B798-5E9DF600FA91', '09970634-6EFD-48BF-8918-C0D56BBB4CA7', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('4B753CC9-7124-4110-AA93-CF6E884074D0', '09970634-6EFD-48BF-8918-C0D56BBB4CA7', '777E35DE-6793-45A3-9EFB-FD884080F6FA', NULL, 10),

	('104D75E8-AFF9-4F69-BAA1-8FC9CB4BC737', '7C48B106-4D78-4D2F-815B-603C80A2AA52', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('09328D27-62BF-440A-8A2E-823EE63F3A8E', '7C48B106-4D78-4D2F-815B-603C80A2AA52', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '9497907A-A256-4D2F-BE54-F59CDB96F259', 10),

	('9DED11DB-87C6-4466-B8EC-AF9084276590', '0F1F2818-2A70-4EC4-987C-2FF586055FC3', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('6C5C6BEA-6069-4C70-AE9E-83ADC2922249', '0F1F2818-2A70-4EC4-987C-2FF586055FC3', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '9497907A-A256-4D2F-BE54-F59CDB96F259', 10),
	
	('BE6056F4-1E5E-4D54-A7CB-974D0D06155A', '269C3B86-75DA-4EAA-8772-66001018D8BF', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('6F62A67C-B7B3-4984-A0F1-0EA554DACAD8', '269C3B86-75DA-4EAA-8772-66001018D8BF', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '9497907A-A256-4D2F-BE54-F59CDB96F259', 10),

	('27998D62-1759-46CC-ACFF-A60DA9D9766B', '6F779B4D-EF21-46AA-BE5C-5650B7FC2E49', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('343D1C80-8776-48B0-B49E-8B8078EE6987', '6F779B4D-EF21-46AA-BE5C-5650B7FC2E49', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '9497907A-A256-4D2F-BE54-F59CDB96F259', 10),

	('0CDD31F6-8F33-4500-981B-3C178B6F59AC', '7AED394D-FCA7-4032-9DD2-FF26D2625E56', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', NULL, 5),
	('FAF543CC-8934-47F7-A45A-CFAD2051ECA0', '7AED394D-FCA7-4032-9DD2-FF26D2625E56', '777E35DE-6793-45A3-9EFB-FD884080F6FA', '9497907A-A256-4D2F-BE54-F59CDB96F259', 10),

	('159449EB-1A12-4506-A0F9-B03B42607F00', '52ED9E3D-FDCA-466A-8FCA-365F394591C4', '92AD1021-175E-4704-9FE6-37B4DDF9ADCA', '3939FF17-9C2D-4D1F-9E65-5A25C7468068', 5),

	('FE8F701D-E1F8-4280-830A-C92ACC802198', '0AB42F6C-0CE4-400A-8D5A-6458BE1942A1', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '9F1007FE-C960-4C30-A669-F6C11526258E', 5),
	('1A9A4ED4-1F7C-40B8-9A6A-5F4795FFAA66', '436A89AA-2924-4ABD-91CB-4F39BE6719D2', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 5),
	('F9EB3CE3-4333-43F9-BC13-F92830FC8FC2', 'EF8BF4A8-3264-459F-B138-CD7A40F97572', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 5),
	('3BA9DB0C-0371-4D3D-B57B-1400BB281515', '711EACFB-D81F-4196-97D7-53930F9D931E', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 5),
	('39CB576A-1A88-4A5F-9D8A-E4819670419A', '507B39EB-7A0E-442D-8EAE-A5DA28F6BF9B', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 5),
	('D97BAF43-B487-4F7D-873A-27E46C6B16AB', '6E24A073-C055-4D9C-A8E5-B2EC457BEB05', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '16B7E7D1-8BBB-4C5D-A255-F7FC7ED20875', 5),
	('BC22A43C-11FF-4A34-B467-D636C9C12E4F', 'D86368FB-AE0E-47BB-8F03-1821507E90D0', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('9F687E87-E6FD-471C-9237-7BBA17A6117E', 'D947E2F1-753D-4F18-AF80-2992D7298EF0', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('07BB30B5-E25D-4676-8182-A00BECBDDB28', 'DF9CEB2D-D67E-4ADB-9C03-AB4408E61629', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('1D416730-70D8-43A5-A27E-3E7E543EB44F', 'F02CFA23-1864-4F8B-99EE-40EA586C3475', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('23D2EE38-C8DC-4480-AD85-51E36AE1AA11', '2381DDF8-3EC8-4346-9B1F-0096CADF5FD5', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('E77E7863-7181-4158-8ED2-C841EE01C330', 'A866C57E-C3AD-4E4E-814F-1D03B22E8A9F', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', 'AC393BA9-9CB8-4AD2-9D4A-D4BFA8D1FE0A', 5),
	('4E6A05C2-5B8F-4B3D-A17B-C634ABE0198C', 'C2880B60-1955-4238-9D99-B908F79C3612', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', NULL, 5),
	('DD0B6F95-2E80-4872-8641-04E59549CC57', 'EB3794C4-90EE-4738-9731-FF37FE3B4E4B', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', '292967F5-B87B-4C4D-A67C-B2FFBA7F8F38', 5),
	('F47EC38E-0798-450D-B139-7FA68F936B27', 'E17B2276-670C-43DF-91E9-23B98213D384', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', NULL, 5),
	('E7E09146-E144-42EA-B900-41927E16FCDC', 'C7A72552-4C1B-4D58-AB7F-738B15381C70', '98C2E6A0-A9D7-4A70-A5B6-B08189F7535B', NULL, 5)
	

)
AS QuestionOptionSource (QuestionOptionId, QuestionId, OptionId, FurtherInformationQuestionId, [Order]) ON QuestionOptionSource.QuestionOptionId = QuestionOptionTarget.QuestionOptionId
WHEN MATCHED THEN
	UPDATE SET 
		QuestionId = QuestionOptionSource.QuestionId,
		OptionId = QuestionOptionSource.OptionId,
		FurtherInformationQuestionId = QuestionOptionSource.FurtherInformationQuestionId,
		[Order] = QuestionOptionSource.[Order]
WHEN NOT MATCHED BY TARGET THEN
	INSERT (QuestionOptionId, QuestionId, OptionId, FurtherInformationQuestionId, [Order])
	VALUES (QuestionOptionId, QuestionId, OptionId, FurtherInformationQuestionId, [Order])
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

MERGE INTO WorkflowQuestion AS WorkflowQuestionTarget
USING (VALUES
	-- stage 2
	('466FBE3D-595E-4E77-94B1-30E4B87BC87B', 'A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', '29657DD5-184B-4D19-9875-41526BB02569'),	
	('42CD4BD6-EEA7-4BDC-A52B-1F6AC7DA3256', 'A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', '42CBC39E-4EAE-4678-84B3-2766FFDB6A39'),	
	('F897DAB8-8011-4AC9-83AA-A02B21B2E645', 'A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', '68299D21-7AD2-4FE1-B515-1592F9B368D1'),
	('053FFBD2-FD50-438F-AB14-720C7DBE6ABF', 'A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', 'C2880B60-1955-4238-9D99-B908F79C3612'),
	('36E63318-E147-4CF4-8E07-16D35098BA0E', 'A3B839EC-BFED-4CC4-B8CD-C9A016F8E401', 'C7A72552-4C1B-4D58-AB7F-738B15381C70'),
	
	-- stage 3
	('4394AE4B-937C-487C-8A90-B36308BDC291', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '25E6848A-8A2A-44B0-A888-8505467FD824'),
	('1ADDE9A4-5D3A-40E8-8837-D46E9B23A77A', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'E17B2276-670C-43DF-91E9-23B98213D384'),
	('9D57237B-E46C-4C6B-8DD0-7EB3D114EC0C', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '34C346F7-071F-49B1-9A6A-B556013A5808'),
	('8A566C66-3361-4492-8F5C-A2C54A60EADC', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('382AD014-DF18-4BEF-ABBD-F00730EE92F7', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('F871A5C0-B5AC-4A8F-8A85-5F3658DFEC57', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('7391B87F-D05A-4A01-97AD-C05DC3F2477E', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('A617FAAF-09EE-42F1-BB87-1995BA3444F1', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('D9DF7F32-ABD7-4BF5-9A99-EA29B6CCF03A', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('E522D7CE-CBD0-4490-83F1-C32EEC7B6D6A', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'FF4FA190-7115-41E1-AA47-454C23074EF5'),
	('0EC1701B-ECC9-4539-95ED-DA1455715B31', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '103E63D9-A781-4F7D-84A0-F253D1172374'),
	('D38097A8-5A96-43DA-A904-29A917CA6688', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'F2DF7921-CCE9-4119-9FB3-452EE0C34895'),
	('7F81BC82-E5CE-468F-B765-0E8417EC97CD', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '940507CC-4CED-4BBD-85BA-36AE1EEE28AA'),
	('F1C3D7A6-B164-41A0-AFD3-5AB54F9C3D91', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '31685F55-4887-4FE1-8491-80A71DD5200A'),
	('8EA771C5-9AFD-446D-B5F9-F2AC82A90202', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'EB3794C4-90EE-4738-9731-FF37FE3B4E4B'),
	('84D89B55-349C-4B7A-85C0-5035CFFA7492', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '8810EEFE-8791-490C-B42B-585AF21175B6'),
	('B7F7302C-A92A-4818-AA32-6A01D2AC14AD', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '57C93C61-9F29-485B-A4EB-EA854E43CD2E'),
	('7D765696-05AA-4E35-9EBC-24D4EA98FF04', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '09970634-6EFD-48BF-8918-C0D56BBB4CA7'),
	('963CB31F-6EC0-4184-8C29-41E66F3F4D37', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '3FE71EDD-37EB-4F8D-853D-FE10B95D7850'),
	('4538B455-9FB9-4C84-AA20-4663FA2750F0', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'A349DD8F-1769-47BD-AECB-FAD95673B8DA'),
	('D3FCB9CF-584A-4C07-84E5-62059FDD2093', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', '067FFB11-0C6A-458B-84B3-AC6EA311CA7E'),
	('A59530F6-2C6E-4F75-A691-0FC750112AD4', 'F04431E6-1F6A-4494-83A4-AA503FA1DC39', 'EB3794C4-90EE-4738-9731-FF37FE3B4E4B'),

	-- stage 4
	('17D7C17A-3665-4DFC-B54E-B4851D10C70D', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '0AB42F6C-0CE4-400A-8D5A-6458BE1942A1'),
	('CF5F6C27-8558-40C8-ABD3-48694749659E', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '436A89AA-2924-4ABD-91CB-4F39BE6719D2'),
	('E0B77A49-FE2C-4775-A7D3-F0AF1A84DD03', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'EF8BF4A8-3264-459F-B138-CD7A40F97572'),
	('3A273925-D576-4FBA-9E44-A5DE64D865D4', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '711EACFB-D81F-4196-97D7-53930F9D931E'),
	('1FD42031-3051-47BA-A6EC-E469D0A8ABF5', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '507B39EB-7A0E-442D-8EAE-A5DA28F6BF9B'),
	('E02E9DC7-5C29-4AD4-B19A-4253EF13DD96', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '6E24A073-C055-4D9C-A8E5-B2EC457BEB05'),
	('B24C33D2-2044-4AD4-95DE-911DA33D7175', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'D86368FB-AE0E-47BB-8F03-1821507E90D0'),
	('34F3B19C-38AA-4FE4-917B-B4523D490364', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'D947E2F1-753D-4F18-AF80-2992D7298EF0'),
	('CC7EA523-3FB5-4408-B487-651E193774AF', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'DF9CEB2D-D67E-4ADB-9C03-AB4408E61629'),
	('106746FD-4A42-49B6-B823-1789A7552995', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'F02CFA23-1864-4F8B-99EE-40EA586C3475'),
	('0B2FB4DA-1D2A-4A82-893B-8DC14EC32411', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', '2381DDF8-3EC8-4346-9B1F-0096CADF5FD5'),
	('8B7185B4-C924-4207-8370-F9DFFCBAF6B6', 'E29F9B0E-D9BB-4E18-9CBF-947720D45E30', 'A866C57E-C3AD-4E4E-814F-1D03B22E8A9F'),

	-- stage 5
	('3A5D760F-A123-4D39-89F0-826AC14DABFD', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '7C48B106-4D78-4D2F-815B-603C80A2AA52'),
	('E3B5A36A-66B8-4B96-B709-8ADD094D96BD', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '0F1F2818-2A70-4EC4-987C-2FF586055FC3'),
	('3EF33F53-E5E4-4CD4-B3AE-17A9CCAA7FDC', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '269C3B86-75DA-4EAA-8772-66001018D8BF'),
	('A905E412-DBBD-45FE-870A-856298FF5231', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '6F779B4D-EF21-46AA-BE5C-5650B7FC2E49'),
	('31F4E770-4F7E-4BF8-B1DC-4FC920194087', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '7AED394D-FCA7-4032-9DD2-FF26D2625E56'),
	('6717FA1D-AD57-4D3B-81A8-C914C9AF1BE2', '5DF2A0E6-63CF-49C3-8935-3F4B6C4F4948', '52ED9E3D-FDCA-466A-8FCA-365F394591C4')
)
AS WorkflowQuestionSource (WorkflowQuestionId, WorkflowStageId, QuestionId) ON WorkflowQuestionSource.WorkflowQuestionId = WorkflowQuestionTarget.WorkflowQuestionId
WHEN MATCHED THEN
	UPDATE SET 
		WorkflowStageId = WorkflowQuestionSource.WorkflowStageId,
		QuestionId = WorkflowQuestionSource.QuestionId
WHEN NOT MATCHED BY TARGET THEN
	INSERT (WorkflowQuestionId, WorkflowStageId, QuestionId)
	VALUES (WorkflowQuestionId, WorkflowStageId, QuestionId)
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

	
MERGE INTO WorkflowStep AS WorkflowStepTarget
USING (VALUES
	--Is there an impairment of, or disturbance in, the functioning of the person’s mind or brain that is preventing them from making the decision at this time? 
	('5B9AC848-330B-4E5E-8BBE-EA5FB0EA0FE4', '69C13E49-E05A-4185-B9B2-CCED15D99694', '466FBE3D-595E-4E77-94B1-30E4B87BC87B', '7D169961-19F2-4572-962A-0981C6312205', '42CD4BD6-EEA7-4BDC-A52B-1F6AC7DA3256', 1), -- yes
	('63DACEB7-FED0-4DA5-9992-71DA0A2C6DF6', '69C13E49-E05A-4185-B9B2-CCED15D99694', '466FBE3D-595E-4E77-94B1-30E4B87BC87B', '4EC4037F-587B-422B-983A-BD6230C696BC', '053FFBD2-FD50-438F-AB14-720C7DBE6ABF', 1), -- no

	-- Is the impairment likely to be temporary or permanent?
	('E64518D9-3581-4624-A51B-DED18FCAC469', '69C13E49-E05A-4185-B9B2-CCED15D99694', '42CD4BD6-EEA7-4BDC-A52B-1F6AC7DA3256', 'FBD1FDE2-B3B2-448D-9D44-F83D9ED46020', '4394AE4B-937C-487C-8A90-B36308BDC291', 1), -- perm
	('08831621-B405-4B5D-9962-31274861A0BF', '69C13E49-E05A-4185-B9B2-CCED15D99694', '42CD4BD6-EEA7-4BDC-A52B-1F6AC7DA3256', 'B0762A43-D6CF-4594-A949-F70D40D2DFD7', 'F897DAB8-8011-4AC9-83AA-A02B21B2E645', 1), -- temp
	
	--Can the decision wait until the impairment or disturbance has resolved?
	('6AD07E46-6DE5-4E64-9CE9-977DABFB1F23', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F897DAB8-8011-4AC9-83AA-A02B21B2E645', 'BFA56866-BC16-4D07-B6DC-5B13385A7EB3', '36E63318-E147-4CF4-8E07-16D35098BA0E', 1), -- yes
	('E46DC4F3-B652-4BD5-A940-1797F2306613', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F897DAB8-8011-4AC9-83AA-A02B21B2E645', '6A156897-B671-4C6B-945E-B329E03D2CA4', '4394AE4B-937C-487C-8A90-B36308BDC291', 1), -- no
	
	--Person does not fall under the requirements of the mental capacity app
	('B4C03A4F-900C-458E-BCC7-61EF5C4E3B4E', '69C13E49-E05A-4185-B9B2-CCED15D99694', '053FFBD2-FD50-438F-AB14-720C7DBE6ABF', '4E6A05C2-5B8F-4B3D-A17B-C634ABE0198C', NULL, 4), -- no

	--Delay the decision until the impairment or disturbance has resolved.
	('37275484-DD65-418A-8EE0-9A92DF562C61', '69C13E49-E05A-4185-B9B2-CCED15D99694', '36E63318-E147-4CF4-8E07-16D35098BA0E', 'E7E09146-E144-42EA-B900-41927E16FCDC', NULL, 3),
	
	-- stage 3
	--Is the environment free from noise and other distractions?
	('95B4642A-014D-4732-9FBF-6CBACA4FEB3E', '69C13E49-E05A-4185-B9B2-CCED15D99694', '4394AE4B-937C-487C-8A90-B36308BDC291', '84E3D60D-4846-4DB2-8A37-D37FC4629F1C', '1ADDE9A4-5D3A-40E8-8837-D46E9B23A77A', 1), -- no
	('B04260DB-70A8-4660-A427-B61ACB1873DE', '69C13E49-E05A-4185-B9B2-CCED15D99694', '4394AE4B-937C-487C-8A90-B36308BDC291', '96991A39-5406-4961-810A-825DA5734198', '9D57237B-E46C-4C6B-8DD0-7EB3D114EC0C', 1), -- yes

	--Find a more suitable place to conduct the assessment
	('226F6355-2971-44A3-BC91-94E8E86B5FAC', '69C13E49-E05A-4185-B9B2-CCED15D99694', '1ADDE9A4-5D3A-40E8-8837-D46E9B23A77A', 'F47EC38E-0798-450D-B139-7FA68F936B27', NULL, 3),

	--Has the person had any life events that may affect them at this time?
	('1B0D2F6B-1FA8-405F-89D0-2B86AD3CA1F5', '69C13E49-E05A-4185-B9B2-CCED15D99694', '9D57237B-E46C-4C6B-8DD0-7EB3D114EC0C', '76051066-44D8-48CD-B835-3F8D388F1F17', '8A566C66-3361-4492-8F5C-A2C54A60EADC', 1), -- yes
	('4CBCEC50-BADA-4EE8-9BF9-95FAC66D0335', '69C13E49-E05A-4185-B9B2-CCED15D99694', '9D57237B-E46C-4C6B-8DD0-7EB3D114EC0C', 'A42245EC-6F9E-4448-A8AA-C15DC27E1E3E', 'D38097A8-5A96-43DA-A904-29A917CA6688', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('10F1D5D3-3EB9-490C-858D-A8934C499ED6', '69C13E49-E05A-4185-B9B2-CCED15D99694', '8A566C66-3361-4492-8F5C-A2C54A60EADC', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('CAAFCD54-02D5-43AC-B3BF-618289BFC667', '69C13E49-E05A-4185-B9B2-CCED15D99694', '8A566C66-3361-4492-8F5C-A2C54A60EADC', 'D89638FB-1CD5-498D-9179-91C349C6A753', 'D38097A8-5A96-43DA-A904-29A917CA6688', 1), -- no

	--Is this a good time of day for the person?
	('29E3FB9F-61D7-4FB8-99DE-3481C851488C', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D38097A8-5A96-43DA-A904-29A917CA6688', '69D09F2B-80F1-4960-A9E7-952402FBCB02', '7F81BC82-E5CE-468F-B765-0E8417EC97CD', 1), -- yes
	('5974F0B0-4969-4417-A873-8581C8669C63', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D38097A8-5A96-43DA-A904-29A917CA6688', '88DDAEC7-9A78-479B-A5A3-DD15378EDC47', '382AD014-DF18-4BEF-ABBD-F00730EE92F7', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('78C7764B-71C4-47B1-B2CD-97FFCB5B90FA', '69C13E49-E05A-4185-B9B2-CCED15D99694', '382AD014-DF18-4BEF-ABBD-F00730EE92F7', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('914567A5-255F-42D5-8ECF-6AB9C443CB5A', '69C13E49-E05A-4185-B9B2-CCED15D99694', '382AD014-DF18-4BEF-ABBD-F00730EE92F7', 'D89638FB-1CD5-498D-9179-91C349C6A753', '7F81BC82-E5CE-468F-B765-0E8417EC97CD', 1), -- no

	--Has the person recently taken medication that may affect their concentration or understanding?
	('CE1D9D59-1A48-487E-8DAF-42E3A381D251', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7F81BC82-E5CE-468F-B765-0E8417EC97CD', '8A1AA021-8842-4783-A09C-A93B6C595141', 'F871A5C0-B5AC-4A8F-8A85-5F3658DFEC57', 1), -- yes
	('BD797161-7549-47CA-A4FB-6422EE3F93D1', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7F81BC82-E5CE-468F-B765-0E8417EC97CD', '1BE2AEC8-1706-448E-A988-7779F9B70D1F', 'F1C3D7A6-B164-41A0-AFD3-5AB54F9C3D91', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('16A90AE1-333C-4533-9776-A95DC00E1AFA', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F871A5C0-B5AC-4A8F-8A85-5F3658DFEC57', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('F6911672-B115-4A7C-A435-AA9025E604EC', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F871A5C0-B5AC-4A8F-8A85-5F3658DFEC57', 'D89638FB-1CD5-498D-9179-91C349C6A753', 'F1C3D7A6-B164-41A0-AFD3-5AB54F9C3D91', 1), -- no

	--Would the person benefit from assistance from others (family, trusted support worker, advocate) during this process?
	('D9A5C1B9-2CA1-4948-A8F4-AA822FF8AA5D', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F1C3D7A6-B164-41A0-AFD3-5AB54F9C3D91', '5CB217BD-78DD-41D5-9B40-A708A69F5F21', '7391B87F-D05A-4A01-97AD-C05DC3F2477E', 1), -- yes
	('E4F7CCF7-E237-40FB-8CF1-672F78C55D9D', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'F1C3D7A6-B164-41A0-AFD3-5AB54F9C3D91', 'D5395000-2351-4694-BD7D-71DD7CA91E69', 'A59530F6-2C6E-4F75-A691-0FC750112AD4', 1), -- no

	--Describe how the person communicates
	('A59530F6-2C6E-4F75-A691-0FC750112AD4', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'A59530F6-2C6E-4F75-A691-0FC750112AD4', 'DD0B6F95-2E80-4872-8641-04E59549CC57', '84D89B55-349C-4B7A-85C0-5035CFFA7492', 1),

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('A57AD139-5ECD-4EF4-9D8C-5605700EB15F', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7391B87F-D05A-4A01-97AD-C05DC3F2477E', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('EC3BB935-250E-4861-A300-C52EC321C4B5', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7391B87F-D05A-4A01-97AD-C05DC3F2477E', 'D89638FB-1CD5-498D-9179-91C349C6A753', 'A59530F6-2C6E-4F75-A691-0FC750112AD4', 1), -- no

	--Does the person require someone to sign or interpret for them?
	('C224FBAE-C125-4CF5-AB66-D8EDB278B29A', '69C13E49-E05A-4185-B9B2-CCED15D99694', '84D89B55-349C-4B7A-85C0-5035CFFA7492', '65A4E159-E782-4BD8-BE01-30FFDF516C81', 'B7F7302C-A92A-4818-AA32-6A01D2AC14AD', 1), -- yes
	('4B103199-1F28-45A4-A59F-C789EBE092FC', '69C13E49-E05A-4185-B9B2-CCED15D99694', '84D89B55-349C-4B7A-85C0-5035CFFA7492', '326B34E9-692E-4363-84C1-3B8871B1F042', '7D765696-05AA-4E35-9EBC-24D4EA98FF04', 1), -- no

	--Are they present?
	('FD7DF95E-B932-4908-B114-B20A79B0E5EB', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'B7F7302C-A92A-4818-AA32-6A01D2AC14AD', '05A04BAD-7B59-43F5-86DF-3F3A00E9B14C', '7D765696-05AA-4E35-9EBC-24D4EA98FF04', 1), -- yes
	('1ACA45CA-1BB3-4328-B426-9FCA5FC656EE', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'B7F7302C-A92A-4818-AA32-6A01D2AC14AD', 'F2335E13-3D15-436F-8C86-BE8DB6EFC4DA', 'A617FAAF-09EE-42F1-BB87-1995BA3444F1', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('C831519C-57DD-4BA3-863B-D37F32141C2E', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'A617FAAF-09EE-42F1-BB87-1995BA3444F1', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('C9F23152-3221-4BE9-B48C-7ADE64F9DB8C', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'A617FAAF-09EE-42F1-BB87-1995BA3444F1', 'D89638FB-1CD5-498D-9179-91C349C6A753', '7D765696-05AA-4E35-9EBC-24D4EA98FF04', 1), -- no

	--Does the person use hearing aids?
	('F2367677-EED8-4226-B538-1BE328CD06EC', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7D765696-05AA-4E35-9EBC-24D4EA98FF04', '5EB4577C-20D2-4BD2-B798-5E9DF600FA91', '963CB31F-6EC0-4184-8C29-41E66F3F4D37', 1), -- yes
	('7CA978FB-118E-4363-8F59-FBA4F581D9D4', '69C13E49-E05A-4185-B9B2-CCED15D99694', '7D765696-05AA-4E35-9EBC-24D4EA98FF04', '4B753CC9-7124-4110-AA93-CF6E884074D0', '4538B455-9FB9-4C84-AA20-4663FA2750F0', 1), -- no
	
	--Are they available, in working order and are fitted?
	('29768D64-7B5F-4B06-AF9C-7943FBFB4FB5', '69C13E49-E05A-4185-B9B2-CCED15D99694', '963CB31F-6EC0-4184-8C29-41E66F3F4D37', '804F31BD-DFEA-48A1-A550-A7E7542B0C78', '4538B455-9FB9-4C84-AA20-4663FA2750F0', 1), -- yes
	('2BDCDF6C-8670-4AED-8452-BB8DA1C78FAC', '69C13E49-E05A-4185-B9B2-CCED15D99694', '963CB31F-6EC0-4184-8C29-41E66F3F4D37', '2FDC336D-0A77-4E10-834F-0F2F923CA79C', 'D9DF7F32-ABD7-4BF5-9A99-EA29B6CCF03A', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('54884866-3E96-4C56-8927-2263CA1841D3', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D9DF7F32-ABD7-4BF5-9A99-EA29B6CCF03A', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('DE04625A-9E93-4F24-B4FD-F53768BD7044', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D9DF7F32-ABD7-4BF5-9A99-EA29B6CCF03A', 'D89638FB-1CD5-498D-9179-91C349C6A753', '4538B455-9FB9-4C84-AA20-4663FA2750F0', 1), -- no

	--Does the person use glasses or contact lenses to read or see information, pictures, symbols or photographs?
	('524A6D33-0D1C-4C65-A875-CC339CF2E4EB', '69C13E49-E05A-4185-B9B2-CCED15D99694', '4538B455-9FB9-4C84-AA20-4663FA2750F0', 'B86D2A99-C34D-4420-B7F4-9E7873D6C305', 'D3FCB9CF-584A-4C07-84E5-62059FDD2093', 1), -- yes
	('FE505F8F-D8C8-42F3-B24D-47375D913867', '69C13E49-E05A-4185-B9B2-CCED15D99694', '4538B455-9FB9-4C84-AA20-4663FA2750F0', 'F7CA0816-B4D5-418D-BF6E-710CA5B829BF', '17D7C17A-3665-4DFC-B54E-B4851D10C70D', 1), -- no

	--Are they available, clean, and being worn if required?
	('AA9B64C9-EBB5-42E9-BA3B-D1B6C5D8412A', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D3FCB9CF-584A-4C07-84E5-62059FDD2093', '01731380-FC2F-45D6-96ED-3EC6A83326BF', '17D7C17A-3665-4DFC-B54E-B4851D10C70D', 1), -- yes
	('CBF84B36-5DFC-46E6-80D8-447C052A329E', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'D3FCB9CF-584A-4C07-84E5-62059FDD2093', 'CE82417C-6CD9-47D5-8E9E-FE86372D8AF7', 'E522D7CE-CBD0-4490-83F1-C32EEC7B6D6A', 1), -- no

	--Does the assessment require delaying whilst these factors are corrected or mitigated for?
	('FDCD86DD-FCD7-4C9B-8221-7A685B08219B', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E522D7CE-CBD0-4490-83F1-C32EEC7B6D6A', '7BDE5229-631A-4EFF-A73E-948A088E1E8F', NULL, 3), -- yes
	('39F65510-929E-41B8-B58D-A17E99FA4E55', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E522D7CE-CBD0-4490-83F1-C32EEC7B6D6A', 'D89638FB-1CD5-498D-9179-91C349C6A753', '17D7C17A-3665-4DFC-B54E-B4851D10C70D', 1), -- no

	--stage 4
	--Provide the information to the person, about the decision to be made. 
	('3908D70D-7072-434F-B76C-DBDFDC82BAEF', '69C13E49-E05A-4185-B9B2-CCED15D99694', '17D7C17A-3665-4DFC-B54E-B4851D10C70D', 'FE8F701D-E1F8-4280-830A-C92ACC802198', 'CF5F6C27-8558-40C8-ABD3-48694749659E', 1),

	--Explain to the person the reason the decision is needed
	('3FA400D0-D667-43F1-9116-56CF0FD36DE6', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'CF5F6C27-8558-40C8-ABD3-48694749659E', '1A9A4ED4-1F7C-40B8-9A6A-5F4795FFAA66', 'E0B77A49-FE2C-4775-A7D3-F0AF1A84DD03', 1),

	--Explain to the person about the possible benefits of the proposed treatment or care.
	('5C3EB186-E89C-4848-A574-1388099D3065', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E0B77A49-FE2C-4775-A7D3-F0AF1A84DD03', 'F9EB3CE3-4333-43F9-BC13-F92830FC8FC2', '3A273925-D576-4FBA-9E44-A5DE64D865D4', 1),

	--Explain to the person about the possible disadvantages or risks of the treatment or care.
	('63ECBCFC-189D-4682-BCE1-4110E50008AE', '69C13E49-E05A-4185-B9B2-CCED15D99694', '3A273925-D576-4FBA-9E44-A5DE64D865D4', '3BA9DB0C-0371-4D3D-B57B-1400BB281515', '1FD42031-3051-47BA-A6EC-E469D0A8ABF5', 1),

	--Explain to the person any possible alternatives for the treatment or care.
	('8FAFC607-31C4-4787-8455-2FEAD92EF9DF', '69C13E49-E05A-4185-B9B2-CCED15D99694', '1FD42031-3051-47BA-A6EC-E469D0A8ABF5', '39CB576A-1A88-4A5F-9D8A-E4819670419A', 'E02E9DC7-5C29-4AD4-B19A-4253EF13DD96', 1),

	--Ask the person if they have any questions or want anything explained again.
	('BE53E848-3BFE-438B-8D4D-61F0A56E1AF4', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E02E9DC7-5C29-4AD4-B19A-4253EF13DD96', 'D97BAF43-B487-4F7D-873A-27E46C6B16AB', 'B24C33D2-2044-4AD4-95DE-911DA33D7175', 1),

	--Ask what the person has understood about the proposed treatment or care.
	('3720B061-342C-49FE-979B-9D1F698F7966', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'B24C33D2-2044-4AD4-95DE-911DA33D7175', 'BC22A43C-11FF-4A34-B467-D636C9C12E4F', '34F3B19C-38AA-4FE4-917B-B4523D490364', 1),

	--Ask the person what would happen if they had the proposed treatment or care
	('5DC2B306-EF0F-4AC3-B367-6E921BD6338E', '69C13E49-E05A-4185-B9B2-CCED15D99694', '34F3B19C-38AA-4FE4-917B-B4523D490364', '9F687E87-E6FD-471C-9237-7BBA17A6117E', 'CC7EA523-3FB5-4408-B487-651E193774AF', 1),

	--Ask the person what would happen if they did not have or receive the proposed treatment or care.
	('5DAE6856-78F2-435D-8C4C-C39A8BE7EE16', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'CC7EA523-3FB5-4408-B487-651E193774AF', '07BB30B5-E25D-4676-8182-A00BECBDDB28', '106746FD-4A42-49B6-B823-1789A7552995', 1),

	--Ask the person what the possible benefits/ good things are about having the proposed treatment or care.
	('69D6931F-D62D-44EC-8DE8-A805071AB2E5', '69C13E49-E05A-4185-B9B2-CCED15D99694', '106746FD-4A42-49B6-B823-1789A7552995', '1D416730-70D8-43A5-A27E-3E7E543EB44F', '0B2FB4DA-1D2A-4A82-893B-8DC14EC32411', 1),

	--Ask the person what the possible risks/ bad things are about having the proposed treatment or care.
	('0A77A649-ECBA-4438-9C5D-62FBD11AA9BD', '69C13E49-E05A-4185-B9B2-CCED15D99694', '0B2FB4DA-1D2A-4A82-893B-8DC14EC32411', '23D2EE38-C8DC-4480-AD85-51E36AE1AA11', '8B7185B4-C924-4207-8370-F9DFFCBAF6B6', 1),

	--Ask the person what their decision is about the proposed treatment or care.
	('4DE7183A-6961-48BA-9A58-6CEB14703569', '69C13E49-E05A-4185-B9B2-CCED15D99694', '8B7185B4-C924-4207-8370-F9DFFCBAF6B6', 'E77E7863-7181-4158-8ED2-C841EE01C330', '3A5D760F-A123-4D39-89F0-826AC14DABFD', 1),

	-- stage 5
	--Has the person been able to understand the information relating to the decision to be made?
	('D9420D6C-1CAC-45BB-9759-23CD3D501856', '69C13E49-E05A-4185-B9B2-CCED15D99694', '3A5D760F-A123-4D39-89F0-826AC14DABFD', '104D75E8-AFF9-4F69-BAA1-8FC9CB4BC737', 'E3B5A36A-66B8-4B96-B709-8ADD094D96BD', 1), -- yes
	('58DABB83-2FBC-49C5-B996-C5FBBA732D11', '69C13E49-E05A-4185-B9B2-CCED15D99694', '3A5D760F-A123-4D39-89F0-826AC14DABFD', '09328D27-62BF-440A-8A2E-823EE63F3A8E', 'E3B5A36A-66B8-4B96-B709-8ADD094D96BD', 1), -- no

	--Has the person been able to retain the information relating to the decision to be made?
	('B061DC08-5AD2-4F57-B295-7A485AF104A8', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E3B5A36A-66B8-4B96-B709-8ADD094D96BD', '9DED11DB-87C6-4466-B8EC-AF9084276590', '3EF33F53-E5E4-4CD4-B3AE-17A9CCAA7FDC', 1), -- yes
	('0912CFB7-4BB2-4C3E-AE20-AC7467188C16', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'E3B5A36A-66B8-4B96-B709-8ADD094D96BD', '6C5C6BEA-6069-4C70-AE9E-83ADC2922249', '3EF33F53-E5E4-4CD4-B3AE-17A9CCAA7FDC', 1), -- no

	--Has the person been able to weigh the information to enable them to make an informed decision?
	('BD7332FB-8D4B-4F4F-B7A2-8CE8DB287191', '69C13E49-E05A-4185-B9B2-CCED15D99694', '3EF33F53-E5E4-4CD4-B3AE-17A9CCAA7FDC', 'BE6056F4-1E5E-4D54-A7CB-974D0D06155A', 'A905E412-DBBD-45FE-870A-856298FF5231', 1), -- yes
	('DDF90D98-5614-4657-9B9B-CDB526C317D3', '69C13E49-E05A-4185-B9B2-CCED15D99694', '3EF33F53-E5E4-4CD4-B3AE-17A9CCAA7FDC', '6F62A67C-B7B3-4984-A0F1-0EA554DACAD8', 'A905E412-DBBD-45FE-870A-856298FF5231', 1), -- no

	--Has the person been able to communicate their decision by any means?
	('66C84492-6B14-4F48-87C8-A7BBF097024F', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'A905E412-DBBD-45FE-870A-856298FF5231', '27998D62-1759-46CC-ACFF-A60DA9D9766B', '31F4E770-4F7E-4BF8-B1DC-4FC920194087', 1), -- yes
	('CE0AD286-1B63-4CCF-BD82-5139C09976CA', '69C13E49-E05A-4185-B9B2-CCED15D99694', 'A905E412-DBBD-45FE-870A-856298FF5231', '343D1C80-8776-48B0-B49E-8B8078EE6987', '31F4E770-4F7E-4BF8-B1DC-4FC920194087', 1), -- no
	
	--On the balance of probabilities, based on the evidence gathered, do you believe that the person has the capacity to make this decision at this time?
	('5B4E1F74-4E04-417F-AE1F-9B82B814DC6E', '69C13E49-E05A-4185-B9B2-CCED15D99694', '31F4E770-4F7E-4BF8-B1DC-4FC920194087', '0CDD31F6-8F33-4500-981B-3C178B6F59AC', '6717FA1D-AD57-4D3B-81A8-C914C9AF1BE2', 1), -- yes
	('3F3DF78D-4AEB-411A-B464-60DEF49D4898', '69C13E49-E05A-4185-B9B2-CCED15D99694', '31F4E770-4F7E-4BF8-B1DC-4FC920194087', 'FAF543CC-8934-47F7-A45A-CFAD2051ECA0', NULL, 4), -- no

	--The person has the capacity to make this decision.
	('A1E52BE6-2DEC-4B17-96C4-C696E238CA28', '69C13E49-E05A-4185-B9B2-CCED15D99694', '6717FA1D-AD57-4D3B-81A8-C914C9AF1BE2', '159449EB-1A12-4506-A0F9-B03B42607F00', NULL, 4)

)
AS WorkflowStepSource (WorkflowStepId, WorkflowVersionId, CurrentWorkflowQuestionId, QuestionOptionId, NextWorkflowQuestionId, OutcomeStatusId) ON WorkflowStepSource.WorkflowStepId = WorkflowStepTarget.WorkflowStepId
WHEN MATCHED THEN
	UPDATE SET 
		WorkflowVersionId = WorkflowStepSource.WorkflowVersionId,
		CurrentWorkflowQuestionId = WorkflowStepSource.CurrentWorkflowQuestionId,
		QuestionOptionId = WorkflowStepSource.QuestionOptionId,
		NextWorkflowQuestionId = WorkflowStepSource.NextWorkflowQuestionId,
		OutcomeStatusId = WorkflowStepSource.OutcomeStatusId
WHEN NOT MATCHED BY TARGET THEN
	INSERT (WorkflowStepId, WorkflowVersionId, CurrentWorkflowQuestionId, QuestionOptionId, NextWorkflowQuestionId, OutcomeStatusId)
	VALUES (WorkflowStepId, WorkflowVersionId, CurrentWorkflowQuestionId, QuestionOptionId, NextWorkflowQuestionId, OutcomeStatusId)
WHEN NOT MATCHED BY SOURCE THEN
	DELETE;

UPDATE WorkflowVersion SET InitialWorkflowQuestionId = '466FBE3D-595E-4E77-94B1-30E4B87BC87B' WHERE [Description] = 'Initial version'

UPDATE WorkflowStage SET InitialWorkflowQuestionId = '466FBE3D-595E-4E77-94B1-30E4B87BC87B' WHERE ShortDescription = 'Section2'
UPDATE WorkflowStage SET InitialWorkflowQuestionId = '4394AE4B-937C-487C-8A90-B36308BDC291' WHERE ShortDescription = 'Section3'
UPDATE WorkflowStage SET InitialWorkflowQuestionId = '17D7C17A-3665-4DFC-B54E-B4851D10C70D',DisplayStage1DecisionMade=1 WHERE ShortDescription = 'Section4'
UPDATE WorkflowStage SET InitialWorkflowQuestionId = '3A5D760F-A123-4D39-89F0-826AC14DABFD',DisplayStage1DecisionMade=1 WHERE ShortDescription = 'Section5'

ALTER TABLE WorkflowVersion
	ALTER COLUMN InitialWorkflowQuestionId UNIQUEIDENTIFIER NOT NULL;
